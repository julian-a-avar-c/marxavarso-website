---
import { config as mainConfig } from "@/config/main";
import { config as pageConfig } from "@/config/pages/about";
const config = {
  main: mainConfig,
  page: pageConfig,
};

import { cn } from "@/lib/utils";

import Layout from "@/layouts/Layout.astro";
import Header from "@/components/layout/Header.astro";
import Footer from "@/components/layout/Footer.astro";

import Content80 from "@/components/section/new/Content80.astro";
import HalfAndHalf from "@/components/section/HalfAndHalf.astro";
import ProportionalBento from "@/components/section/new/ProportionalBento.astro";

import Hero from "@/components/section/new/Hero.astro";

import { Icon } from "astro-icon/components";
import { Button } from "@/components/ui/button";
import { Accordion } from "@/components/my-ui/accordion";
import { LogoBelt } from "@/components/section/new/LogoBelt";

function alphabeticalSort(a: string, b: string) {
  if (a < b) {
    return -1;
  }
  if (a > b) {
    return 1;
  }
  return 0;
}
---

<Layout title={config.main.shortTitle} class={cn("w-full")}>
  <Header />

  <main class={cn("col-[fullbleed]", "grid grid-cols-subgrid")}>
    <Hero title="About" backgroundImageSource="/images/IMG_2252.JPEG" />

    <LogoBelt
      client:only="react"
      duration={80}
      className={cn(
        "col-[fullbleed]",
        "py-32",
        "bg-[url(/images/textures/noise.svg)] bg-black/90 bg-blend-darken",
      )}
      heightClass="h-18"
      images={config.main.partners}
    />

    <Content80
      class={cn(
        "bg-[url(/images/textures/noise.svg)] bg-black/90 bg-blend-darken",
      )}
      contentClass={cn(
        "text-white",
        "w-[80%]",
        "grid grid-cols-2 items-start",
        "gap-x-16",
        "pb-(--section-padding)",
      )}
    >
      <div
        class={cn(
          "bg-[url('/images/IMG_2172.JPEG')] bg-size-[150%] bg-[30%_35%]",
          "rounded-2xl aspect-square",
        )}
      >
      </div>

      <div class="flex flex-col gap-12">
        <h1 class="text-6xl font-bold">Who we are</h1>

        <div class="text-lg/8 flex flex-col gap-4">
          {config.page.whoWeAre.map((p) => <p>{p}</p>)}
        </div>
      </div>
    </Content80>

    <div
      class={cn(
        "col-[fullbleed]",
        "grid grid-cols-subgrid",
        "bg-[url('/images/textures/background.svg')] bg-cover bg-fixed",
        "py-(--section-padding)",
      )}
    >
      <section
        class={cn(
          "col-[content]",
          "flex flex-col items-center",
          "gap-(--section-padding)",
        )}
      >
        <h1 class="font-bold text-7xl">Join the pack!</h1>

        <div class={cn("grid grid-cols-2 gap-16", "w-[80%]")}>
          {
            Object.entries(config.page.people)
              .toSorted((a, b) =>
                alphabeticalSort(
                  a[0].split(/\./).toReversed()[0],
                  b[0].split(/\./).toReversed()[0],
                ),
              )
              .map(([username, person]) => (
                <div
                  class={cn(
                    "grid grid-cols-[4fr_5fr] gap-4 rounded-xl",
                    "bg-white",
                    "p-8",
                    "shadow-lg",
                  )}
                >
                  <div class="flex gap-2 col-[1/-1]">
                    <h2 class="inline text-lg font-bold">{person.title}</h2>
                    <span>|</span>
                    <h3 class="inline text-lg text-gray-500">
                      {person.subtitle}
                    </h3>
                  </div>
                  <div class="flex flex-col gap-2">
                    <img
                      alt={person.avatar.alt}
                      src={person.avatar.src}
                      class="aspect-square rounded-sm object-cover"
                    />
                    <ul class="text-lg flex gap-2">
                      {person.links.map((link) => (
                        <li>
                          <a href={link.href}>
                            <Icon name={link.icon} />
                          </a>
                        </li>
                      ))}
                    </ul>
                  </div>
                  <p class="text-sm/5">{person.description}</p>
                </div>
              ))
          }
        </div>
      </section>
    </div>
  </main>

  <Footer />
</Layout>
